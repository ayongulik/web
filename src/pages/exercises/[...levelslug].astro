---
import BaseLayout from '../../layouts/Base.astro'
import Breadcrumb from '../../components/Breadcrumb.astro'
import { getGroupedStaticPaths } from '../../utils/collection'
import { removeStripes } from '../../utils/string'

import type { CollectionEntry } from 'astro:content'

export async function getStaticPaths() {
    const groupedEntries = await getGroupedStaticPaths(
        'exercises', 
        (slug) => slug.split('/')[0]
    )

    return groupedEntries.map(groupedEntry => ({
        params: {
            levelslug: groupedEntry.params.group,
        },
        props: {
            ...groupedEntry.props,
            slug: groupedEntry.params.group
        }
    }))
}

interface Props {
  entries: CollectionEntry<'exercises'>[]
  slug: string
}

const { entries, slug } = Astro.props;

const title = removeStripes(slug.split('/').pop() as string)
---
<BaseLayout>
	<div class="max-w-screen-lg mx-auto px-4 relative">
        <Breadcrumb path={`exercises/${slug}`} class="py-2 my-4" />

        <h1 class="text-2xl font-semibold text-purple-800 mt-8 mb-4 capitalize">{title}</h1>

        <ul>
            {entries.map(entry => (<li>{entry.slug}</li>))}
        </ul>
    </div>
</BaseLayout>